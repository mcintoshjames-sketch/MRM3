# Backend Pytest Tech Debt

Context
- Command: `python3.11 -m pytest` (run from `api/`)
- Result: 46 failed, 1256 passed, 1453 warnings (1302 tests total)

Outstanding failures (triage/fix later)

tests/test_deployment_tasks.py
- TestDeploymentTaskConfirmation::test_confirm_deployment_without_validation
- TestDeploymentTaskConfirmation::test_confirm_with_validation_override
- TestDeploymentTaskConfirmation::test_cannot_confirm_twice

tests/test_kpi_report.py
- TestKPIReportRegionFiltering::test_all_19_metrics_present

tests/test_model_version_warnings.py
- test_create_version_lead_time_warning
- test_create_version_sufficient_lead_time

tests/test_recommendations.py
- TestRecommendationLifecycle::test_submit_rebuttal_transitions_to_in_rebuttal
- TestRecommendationLifecycle::test_accept_rebuttal_transitions_to_dropped
- TestRecommendationLifecycle::test_override_rebuttal_transitions_to_pending_action_plan
- TestRecommendationLifecycle::test_submit_action_plan_transitions_to_pending_validator_review
- TestRecommendationLifecycle::test_request_revisions_transitions_to_pending_response
- TestRecommendationLifecycle::test_finalize_transitions_to_pending_acknowledgement
- TestRecommendationLifecycle::test_acknowledge_transitions_to_open
- TestRecommendationLifecycle::test_decline_acknowledgement_returns_to_pending_validator_review
- TestRecommendationLifecycle::test_submit_for_closure_transitions_to_pending_closure_review
- TestRecommendationLifecycle::test_return_for_rework_transitions_to_rework_required
- TestRecommendationLifecycle::test_approve_closure_low_priority_directly_closes
- TestRecommendationLifecycle::test_approve_closure_high_priority_creates_approvals
- TestPriorityAndApprovalRules::test_approval_creation_includes_global_and_regional
- TestActionPlanTasks::test_task_default_status_is_not_started
- TestActionPlanTasks::test_task_status_flow_not_started_to_in_progress_to_completed
- TestActionPlanTasks::test_completed_task_has_completed_date
- TestRebuttals::test_rebuttal_blocked_after_override_one_strike_rule
- TestRebuttals::test_rebuttal_review_records_reviewer_and_decision
- TestClosureEvidence::test_upload_evidence_allowed_in_open_status
- TestClosureEvidence::test_closure_submission_blocked_without_evidence
- TestPermissionsAndRoles::test_developer_cannot_review_rebuttal
- TestPermissionsAndRoles::test_admin_can_perform_any_action
- TestNegativeAndEdgeCases::test_cannot_transition_from_terminal_state_dropped
- TestNegativeAndEdgeCases::test_cannot_transition_from_terminal_state_closed
- TestNegativeAndEdgeCases::test_closure_blocked_with_incomplete_tasks
- TestNegativeAndEdgeCases::test_approve_already_approved_approval_returns_error
- TestApprovalAuthorizationAndSecurity::test_regular_user_cannot_approve_global_approval
- TestApprovalAuthorizationAndSecurity::test_regional_approver_cannot_approve_wrong_region
- TestApprovalAuthorizationAndSecurity::test_reject_approval_returns_to_rework_required
- TestApprovalAuthorizationAndSecurity::test_reject_requires_reason
- TestApprovalAuthorizationAndSecurity::test_void_approval_admin_only
- TestApprovalAuthorizationAndSecurity::test_void_all_approvals_closes_recommendation
- TestApprovalAuthorizationAndSecurity::test_admin_can_approve_any_approval_type
- TestDashboardAndReports::test_my_tasks_validator_sees_review_tasks
- TestDashboardAndReports::test_my_tasks_approver_sees_pending_approvals
- TestDashboardAndReports::test_dashboard_by_model_include_closed
- TestDashboardAndReports::test_dashboard_open_excludes_terminal_states

tests/test_scorecard.py
- TestLoadScorecardConfig::test_load_from_json_file
- TestLoadScorecardConfig::test_config_criteria_have_required_fields
- TestLoadScorecardConfig::test_config_sections_have_required_fields

Notes
- Determine which failures are pre-existing vs. regressions before fixing.
